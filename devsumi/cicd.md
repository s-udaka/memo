## CI/CDを使い倒して数段上のソフトウェア開発をしよう！
- CI/CD戦国時代　大手が参入してきている
### なぜCI/CDの関心がこれほど高まっているのか？
- 金　ひろくに　さん
- モチベーションについて
 - ぐぐると金さんの記事がトップに出てくる
- what why whynot beyond
### circleCIジャパン
- 日本語サポート
- ドキュメントの日本語化
- ユーザコミュニティ
### CI/継続的インテグレーション
#### CIとは何か
- 何度も同じ手順を繰り返さないといけない
- 人の目や手に頼ると必ず見落としが発生する
- それコンピューターにやらせよう！
#### CIとはテストを自動で実行する仕組み
- 簡単にやらせることができる
#### なぜCI
- プロダクトの品質保証してくれる
- テストあるけど実行し忘れた
- テスト結果が環境依存
- 昔書いたテストが壊れていて動かない
- テストの信頼性がない
#### テストの実行し忘れ
- リリース前にテストし忘れる
- バグを見落とす
- 津遠位テストを回す常に
- CICDが検知自動
#### テストが壊れてしまう
- 古いテストが壊れている
- テストが悪いのかコードが悪いのかわからない
- 壊れたテストをすばやく検知
 - テストが壊れた時点で検知
 - 直さないとマージできない
- 使われていない自動化はこわれていく
 - CIで継続的にメンテナンスしてくことが大事
#### テスト結果が環境依存
- 僕のマシンだとテスト通ってます
- テスト環境の際による問題
#### CIをユイツのテスト環境にする
- 毎回同じテスト環境が構築される
- まっさらな環境でテストを実行
- いつ実行しても同じテスト環境になる
- dockerが便利
### CIの目的　テストの新陳代謝を高めて信頼性をあげる
### CIの問題
- テストがない
- CIを導入する上で一番やっかいな問題
- CIを始めたい
- でも実行するテストが存在しない
- テスト文化の布教にはコストと時間がかかる
#### CIを導入するステップ
- お好みのCI/CDツールを選ぶ
- テスト以外のタスクを自動化
 - 構文チェック
 - カバレッジ計測
 - ドキュメントの自動作成
 - 循環的依存度のチェック
- 可視化しよう
 - ステータスバッジ
 - ダッシュボードの作成
 - メール・チャットでの通知
- マージブロックを有効化
 - CIが通らないとマージできない
 - 管理者しかマージできない
 - フォースプッシュ禁止
 - マージするための条件をブランチごとに指定できる機能を使う
- テストの追加
 - 少しずつテストを追加していく
  - ユニットテストは後回し
  - 最も大事なビジネスロジック
  - この時点での無理は禁物
- CI導入を妨げる問題
 - CIツールのメンテナンス　
  - CICDツールのメンテは大変
  - 通常専任のエンジニアが必要
  - CircleCiのようなクラウド型がおすすめ
### CIのまとめ
 - テストの信頼性と品質を向上させる
 - テストがなくてもCIははじめられる
 - できる自動化からはじめよう
- CIのその先
### CDとはなにか
- 継続的デリバリー
 - 常にリリース可能な状態を維持する
  - リリース作業に人間の意志が介在する
- 継続的デプロイメント（CDと言ったらこっち）
 - リリースに人の意志が介在しない
  - 進化系
- ビジネス価値を継続的にデリバリーしていこう
- デプロイとはコードを本番環境に配置すること
- リリースとは配置したコードをトラフィックをさばくこと
#### なぜCD
- 問題
 - 検証環境で見つからなかったバグ
 - 仕様と全然違う動きをする
 - そもそも仕様が間違ってた
- フィードバックループを使おう
 - 細かい単位でリリースする
 - 早くフィードバックを得る
 - カイゼンする
- CDなしだとループが回らない
 - リリースの許可が必要
 - ヒューマンエラー
  - フィードバックが回らない
- No CD, No Feedback Loop
- CIを回すためにCDが必要
#### CDを導入する問題
- 技術的な問題
- 組織的なもインダイ
- そもそもアーキテクチャがCDに向いてない
- エンタープライズなアーキテクチャ
- レガシーなアーキテクチャ
- 解決策
 - 時間かけてアップデート
  - サービスの疎結合
  - 徐々にモダン化
- 新システムにはまずCICDを導入しよう
 - 無理だったらすぐに諦める　最初から無理ゲーの場合がある
- CircleCIでの事例
 - Before
  - 常に200万台以上のビルドマシンからなるフリート
  - Chat Ops(hubot)でデプロイ
  - およせ２日で完全に入れ替わる
  - しばらく古いコードと新しいコードが混在する問題
 - 1年かけて以下を実施した
  - Dockerとクーバーの導入
  - マイクロサービス化
   - 既存システムへの導入は難しい
### CDまとめ
### CDのその先
- 迅速なロールバック
- 本番環境でのテスト
 - CDがあると別
 - test環境での失敗例
  - 本番環境とテスト環境のdockerバージョン違い
 - リリースしてみないと結局わからない！！
- 高度なリリース手法
 - カナリーリリース
 - ブルーグリーンデプロイ
  - 本番環境をA・Bの２つに分ける
   - まずはAにリリースして問題なければBにリリースする
- 心理的安全性
 - 迅速なロールバック
 - 本番環境でのテスト
 - 高度なリリース手法
 - プログラミングに対する圧倒的な心理的安全
 - リリースはやり直せる
#### CI/CDはプログラミングを楽しくしてくれる
#### CI/CDの未来について
- 今手動でやっていることを意識しなくてもいい時代
 - CI/CDの設定
 - モニタリング
 - デプロイ環境の構築
- 最初からクライマックス！！
